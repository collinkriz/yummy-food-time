<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yummy Food Time</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons
        const Camera = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"></path><circle cx="12" cy="13" r="3"></circle></svg>;
        const Utensils = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path><path d="M7 2v20"></path><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"></path></svg>;
        const MessageCircle = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>;

        const App = () => {
            const [view, setView] = useState('home');
            const [extracting, setExtracting] = useState(false);
            const [apiKey, setApiKey] = useState(localStorage.getItem('anthropic-api-key') || '');

            const handleImageUpload = async (e) => {
                const file = e.target.files[0];
                if (!file) return;
                setExtracting(true);
                // Logic for Vercel API call would go here
                setTimeout(() => { setExtracting(false); alert("Success!"); }, 2000);
            };

            return (
                <div className="max-w-md mx-auto min-h-screen p-6">
                    <header className="flex items-center gap-2 mb-8">
                        <Utensils className="text-orange-500" />
                        <h1 className="text-2xl font-black">YUMMY</h1>
                    </header>

                    {view === 'home' && (
                        <div className="space-y-6">
                            <div className="bg-orange-500 rounded-3xl p-8 text-white shadow-xl">
                                <h2 className="text-3xl font-bold">Ready to eat?</h2>
                                <p className="opacity-90">Upload a receipt to start.</p>
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                                <label className="bg-white p-6 rounded-2xl shadow-sm border flex flex-col items-center cursor-pointer">
                                    <Camera />
                                    <span className="mt-2 font-bold">Upload</span>
                                    <input type="file" className="hidden" onChange={handleImageUpload} accept="image/*" />
                                </label>
                                <button onClick={() => setView('chat')} className="bg-white p-6 rounded-2xl shadow-sm border flex flex-col items-center">
                                    <MessageCircle />
                                    <span className="mt-2 font-bold">Chat</span>
                                </button>
                            </div>
                        </div>
                    )}

                    {view === 'chat' && (
                        <div>
                            <button onClick={() => setView('home')} className="mb-4 text-orange-500 font-bold">‚Üê Back</button>
                            <div className="bg-white p-6 rounded-2xl shadow-sm border h-96 flex flex-col justify-end">
                                <p className="text-gray-400 text-center mb-4">Ask me anything about your food!</p>
                                <input type="text" placeholder="Type a message..." className="w-full p-3 border rounded-xl" />
                            </div>
                        </div>
                    )}

                    {extracting && (
                        <div className="fixed inset-0 bg-white/80 flex items-center justify-center z-50">
                            <div className="text-center">
                                <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"></div>
                                <p className="font-bold text-orange-500">Reading Receipt...</p>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
